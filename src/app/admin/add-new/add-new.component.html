<!-- add-new.component.html -->
<div class="vh-100 new">  
  <app-navbar [activePage]="'add-new'"></app-navbar>
  <main class="container my-5">
    <div class="card shadow-sm spl-color text-white">
      <div class="card-body text-colorer">
        <form [formGroup]="addNewForm" (ngSubmit)="onSubmit()">
          <div class="row mb-3">
            <div class="col text-center">
              <input type="radio" class="btn-check" name="emp-type" id="employee" value="Employee" 
                    (change)="onEmployeeTypeChange('Employee')" [checked]="employeeType === 'Employee'">
              <label class="btn btn-outline-success m-2" for="employee">Employee</label>
              
              <input type="radio" class="btn-check " name="emp-type" id="manager" value="Manager" 
                    (change)="onEmployeeTypeChange('Manager')" [checked]="employeeType === 'Manager'">
              <label class="btn btn-outline-success m-2" for="manager">Manager</label>
            </div>
          </div>
          
          <div class="row">
            <div class="col-md-6 mb-3">
              <div class="form-group">
                <input type="text" class="form-control" id="user-name" placeholder="User Name" formControlName="username">
                <div *ngIf="addNewForm.get('username')?.invalid && addNewForm.get('username')?.touched" class="text-danger">
                  Username is required
                </div>
              </div>
              
              <div class="form-group mt-2">
                <input type="password" class="form-control" id="password" placeholder="Password" formControlName="password">
                <div *ngIf="addNewForm.get('password')?.invalid && addNewForm.get('password')?.touched" class="text-danger">
                  Password is required (minimum 8 characters)
                </div>
              </div>
              
              <div class="form-group" *ngIf="employeeType === 'Employee'">
                <input type="text" class="form-control mt-2" id="manager-id" placeholder="Manager's Id" formControlName="manager_id">
                <div *ngIf="addNewForm.get('manager_id')?.invalid && addNewForm.get('manager_id')?.touched" class="text-danger">
                  Manager ID is required
                </div>
              </div>
            </div>
            
            <div class="col-md-6 mb-3">
              <div class="form-group">
                <input type="email" class="form-control" id="email-id" placeholder="Email ID" formControlName="email">
                <div *ngIf="addNewForm.get('email')?.invalid && addNewForm.get('email')?.touched" class="text-danger">
                  Valid email is required
                </div>
              </div>
            </div>
          </div>
          
          <div class="row">
            <div class="col text-center">
              <!-- Employee Submit Button -->
              <button *ngIf="employeeType === 'Employee'" 
                      type="submit" 
                      class="btn btn-danger bttn"
                      [disabled]="isSubmitting || addNewForm.invalid">
                <span *ngIf="isSubmitting" class="spinner-border spinner-border-sm mr-1"></span>
                Add Employee
              </button>
              
              <!-- Manager Submit Button -->
              <button *ngIf="employeeType === 'Manager'" 
                      type="submit" 
                      class="btn btn-danger bttn"
                      [disabled]="isSubmitting || addNewForm.invalid">
                <span *ngIf="isSubmitting" class="spinner-border spinner-border-sm mr-1"></span>
                Add Manager
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </main>
</div>